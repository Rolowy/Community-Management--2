<!-- {{form.value | json}} -->

<mat-card class="example-card">
  
  <div class="example-container mt-3">
    <form [formGroup]="form" (ngSubmit)="save()" autocomplete="on">
      <mat-card-content>
        <div class="row mt-4">
          <div class="col-3">
            <mat-form-field appearance="outline">
              <mat-label>Użytkownik</mat-label>
              <mat-select formControlName="owner" placeholder="Wybierz użytkownika">
                <mat-option *ngFor="let user of authService.users | async" [value]="user.uid">{{user.name}} {{user.lastname}}</mat-option>
                <mat-error *ngIf="form.controls['owner'].hasError('required')">Lokal musi mieć przypisanego mieszkańca</mat-error>
              </mat-select>
            </mat-form-field>
          </div>

        </div>
        <div class="row">

          <div class="col-6">
            <mat-form-field appearance="outline">
              <mat-label>Ulica:</mat-label>
              <input matInput type="text" [(ngModel)]="data.street" formControlName="street" placeholder="Ulica" />
              <mat-icon matSuffix>edit_road</mat-icon>
              <mat-error *ngIf="form.controls['street'].hasError('required')">Ulica jest wymagana</mat-error>
            </mat-form-field>
          </div>

          <div class="col-6">
            <mat-form-field appearance="outline">
              <mat-label>Numer Budynku:</mat-label>
              <input matInput type="text" [(ngModel)]="data.buildingnumber" formControlName="buildingnumber" placeholder="Numer Budynku" />
              <mat-icon matSuffix>format_list_numbered</mat-icon>
            </mat-form-field>
          </div>


        </div>
        <div class="row mt-3">

          <div class="col-6">
            <mat-form-field appearance="outline">
              <mat-label>Numer Lokalu:</mat-label>
              <input matInput type="text" [(ngModel)]="data.apartmentnumber" formControlName="apartmentnumber" placeholder="Numer Lokalu" />
              <mat-icon matSuffix>format_list_numbered</mat-icon>
              <mat-error *ngIf="form.controls['apartmentnumber'].hasError('required')">Numer Lokalu jest wymagany</mat-error>
              
            </mat-form-field>
          </div>

          <div class="col-6">
            <app-input title="Kod Pocztowy" [ngModel]="data.postcode" [control]="postcode" [minLength]=6 [maxLength]=6 format="00-000"></app-input>
          </div>

          

        </div>

        

        <div class="row my-3">

          <div class="col-6">
            <app-input title="Powierzchnia" [ngModel]="data.area" class="my-2" [minLength]=5 [maxLength]=5 [control]="area" [dropSpecial]=false format="000,00||00,00||0,00" placeholder="X.XX"></app-input>
          </div>

          <div class="col-6">
            <app-input title="Stawka (za m2)" [ngModel]="data.rate" class="my-2" [minLength]=5 [maxLength]=5 [control]="rate" [dropSpecial]=false format="000,00||00,00||0,00" placeholder="X.XX"></app-input>
          </div>

        </div>

        <div class="row">
          <div class="col-12 text-right">
            <button mat-raised-button color="primary" type="submit" [disabled]="!form.valid">
              Zaakceptuj zmiany
            </button>
          </div>
        </div>
       
      </mat-card-content>

    </form>
  </div>
  <mat-card-footer>
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
  </mat-card-footer>
</mat-card>
